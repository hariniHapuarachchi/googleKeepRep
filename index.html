<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
</head>
<body>
        <div class="container" >
                <form id="formStuc">
                  <div class="form-group" id="effect">
                    <input type="text" class="form-control" id="txtTitle" placeholder="Tittle" name="txtTitle" style="box-shadow:none">
                  </div>
                  <div class="form-group" id="effect">
                      
                    <div class="form-group" id="addInput" name="takeNote" contenteditable="true">
                      <!-- <input type="text" class="form-control" id="takeNote" placeholder="Take a Note..." style="box-shadow:none"> -->
                     
                    </div>
                
                    <i class="fas fa-palette" id="colorImg" title="Change Color">
                      <div id="selectColor" style="background-color:#E6E6FA">
                      <div style="text-align:center">
                        <span class="dot" style="background-color:white" id="dot1"></span>
                        <span class="dot" style="background-color: #FFEFD5" id="dot2"></span>
                        <span class="dot" style="background-color: #BDB76B" id="dot3"></span>
                        <span class="dot" style="background-color: #9ACD32" id="dot4"></span>
                      </div>
  
                      <div style="text-align:center">
                        <span class="dot" style="background-color: #3CB371" id="dot5"></span>
                        <span class="dot" style="background-color: #98FB98" id="dot6"></span>
                        <span class="dot" style="background-color: #90EE90" id="dot7"></span>
                        <span class="dot" style="background-color: #8FBC8F" id="dot8"></span>
                      </div>
  
                      <div style="text-align:center">
                        <span class="dot" style="background-color: #AFEEEE" id="dot9"></span>
                        <span class="dot" style="background-color: #5F9EA0" id="dot10"></span>
                        <span class="dot" style="background-color: #D8BFD8" id="dot11"></span>
                        <span class="dot" style="background-color: #9370DB" id="dot12"></span>
                      </div>
                    </div></i>
                    
                  <button type="button" class="btn btn-default" id="colseBtn">Close</button>
                </div>
                  
                </form>
              </div>    
        <!-- <textarea name="" id="" cols="30" rows="10"></textarea> -->
<div class="container">
      </div>
        <div class="grid">
         
        </div>
        
    <!-- <script src="https://unpkg.com/packery@2/dist/packery.pkgd.js"></script> -->
<script src="js/jquery/jquery.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="https://unpkg.com/packery@2/dist/packery.pkgd.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
  var row1 = 0;
  var i = 1;
function getItemElement() {
  var $item = $('<div class="grid-item"></div>');
  // add width and height class
  var wRand = Math.random();
  var hRand = Math.random();
  var widthClass = wRand > 0.85 ? 'grid-item--width3' : wRand > 0.7 ? 'grid-item--width2' : '';
  var heightClass = hRand > 0.85 ? 'grid-item--height3' : hRand > 0.5 ? 'grid-item--height2' : '';
  $item.addClass( widthClass ).addClass( heightClass );
  return $item;
}




 var $grid = $('.grid').packery({
  itemSelector: '.grid-item',
  // columnWidth helps with drop positioning
  columnWidth: 100
});

// make all items draggable
var $items = $grid.find('.grid-item').draggable();
// bind drag events to Packery
$grid.packery( 'bindUIDraggableEvents', $items );

$grid.on( 'click', '.grid-item', function( event ) {
  // remove clicked element
  $grid.packery( 'remove', event.currentTarget )
    // shiftLayout remaining item elements
    .packery('shiftLayout');
});

$(document).ready(function(){
    $( "#effect" ).hide(3);
    $("#takeNote").css("color","#C9C2C2");
 
});
console.log("LENGTH:"+$("#addInput").children().length);
if($("#addInput").children().length == 0){
      row1 = row1 + 1;
      
      $("#addInput").append(
            "<div class=\"input-group mb-3\" id=\"ad"+row1+"\" value=\"ad"+row1+"\">\n" +
            "                        <i class='fas fa-plus' id='plusSign'></i><input type=\"text\" class=\"form-control\" aria-label=\"Text input with checkbox\" id=\"takeNote"+row1+"\"><i class='fas fa-times' id='cancelRow'></i>\n" +
            "                    </div>");
    }
   
    var ID = $("#addInput").children().first().attr('id');
console.log(ID);

  // $(document).on('click','#takeNote',function(){
    $("#"+ID).click(function(){
      $("#"+ID).css("color","black");
        $("#txtTitle").css("visibility","visible");
        $("#"+ID).css("visibility","visible");
        $("#colorImg").css("visibility","visible");
        $("#colseBtn").css("visibility","visible");
        $( "#effect" ).show(500);

       
        
    });
 
    $( function() {
    $( "#addInput" ).sortable();
    $( "#addInput" ).disableSelection();
} );
console.log("Len:"+$("#addInput").children().length);
var num = $("#addInput").children().length;

console.log("Number:"+num);
for(;i <= num;i++){
  var divId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
  console.log("Dai:"+divId);
 
  // function newFunction(event){
  
  // }
  $("#"+divId).keyup(function(event){
   
           
            //  $(this).unbind(event);
    // console.log("HI KEY");
    
    // var keycode = (event.keyCode ? event.keyCode : event.which);
    // if(keycode == '13'){
    //   // $("#"+divId).off('keypress');
    //   i = i + 1;
    //   console.log("HIIKEY");
    //   console.log("II:"+i);
    //   var newId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
    //   console.log("NEW:"+newId);
    //   console.log("#"+newId);
    //   $("#"+newId).focus();
    //   divId = $("#addInput div:nth-child("+i+")").attr('id');
    //   console.log("Dkey:"+divId);
    //   // $("#"+divId).trigger(event);
    //   //  return divId;
      
      
      
    // }
    console.log("D2:"+divId);
      // $("#"+divId).trigger(event);
      console.log("HHHHkl");
      console.log("D:"+divId);
    // console.log("ROW:"+row1);
    row1 = row1 + 1;
    // console.log("ROW:"+row1);
    console.log("NewI:"+i);
    var newId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
    console.log("ROW:"+newId);
    var value = $("#"+newId).val();
    
    console.log("#"+value);
    console.log("Letter:"+value.length);

    if(value.length == 1){
    $("#addInput").append(
            "<div class=\"input-group mb-3\" id=\"ad"+row1+"\" value=\"ad"+row1+"\">\n" +
            "                        <i class='fas fa-plus' id='plusSign'></i><input type=\"text\" class=\"form-control\" aria-label=\"Text input with checkbox\" id=\"takeNote"+row1+"\"><i class='fas fa-times' id='cancelRow'></i>\n" +
            "                    </div>");

            console.log($("#addInput div:nth-child(2)").attr('id'));
          }
          console.log("----------------------------------------");
          var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){
      // $("#"+divId).off('keypress');
      // i = i + 1;
      console.log("HIIKEY");
      console.log("II:"+i);
      var newId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
      console.log("NEW:"+newId);
      console.log("#"+newId);
      $("#"+newId).focus();
      divId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
      console.log("MYNEWID:"+divId);
          console.log("HHyy");
          console.log("II:"+i);
          console.log("----------------------------------------");
          // return i;

    }
  });
  console.log("HHyy");
  // i = i + 1;
   console.log("IIg:"+i);

   console.log("D:"+divId);

  //  $("#"+divId).keypress(function(event){
    // var keycode = (event.keyCode ? event.keyCode : event.which);
    // if(keycode == '13'){
    //   // $("#"+divId).off('keypress');
    //   i = i + 1;
    //   console.log("HIIKEY");
    //   console.log("II:"+i);
    //   var newId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
    //   console.log("NEW:"+newId);
    //   console.log("#"+newId);
    //   $("#"+newId).focus();
    //   divId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
    //   console.log("Dkey:"+divId);
      // $("#"+divId).trigger(event);

        // return divId;
      
       
      
    // }
    // console.log("Dkey:"+divId);
    // console.log("gggggggg");
    // return divId;
    // event.preventDefault();
    
  //  });
   console.log("KKKKK:"+divId);
   $("#"+divId).keypress(function(event){

     console.log("JJJJJ"+event.result);
   });
   console.log("hhhhhh");
// console.log("D3:"+divId);
  
  // $("#"+divId).keydown(function(event) {
  //    var keycode = (event.keyCode ? event.keyCode : event.which);
  //   if(keycode == '13'){
  //     console.log("HIIKEY");
    // if(e.which == 13) {
      // var index = i + 1;
      // console.log("I"+i);
      // console.log("In"+index);
      // var divId = $("#addInput div:nth-child("+i+")").attr('id');
  // console.log("D1:"+divId);
      // var itemTxt = $("#takeNote").val(); 
      // console.log("Item:"+itemTxt);
  
      // var value = $("#takeNote").parents().html(); 
     
        // $("#addInput").append(
        //     "<div class=\"input-group mb-3\" id=\"ad"+row1+"\" value=\"ad"+row1+"\">\n" +
        //     "                        <div class=\"input-group-prepend\">\n" +
        //     "                            <div class=\"input-group-text\" id='oneInputGroup'>&nbsp;&nbsp;<i class=\"fas fa-grip-vertical\" id='sideIcon' style='visibility:hidden'></i>\n" +
        //     "                                &nbsp;&nbsp;<input type=\"checkbox\" aria-label=\"Checkbox for following text input\" id=\"chekBoxID"+index+"\">\n" +
        //     "                            </div>\n" +
        //     "                        </div>\n" +
        //     "                        <input value='"+itemTxt+"' type=\"text\" class=\"form-control\" aria-label=\"Text input with checkbox\" id=\"chekBoxTID"+index+"\"><i class='fas fa-times' id='cancelRow'></i>\n" +
        //     "                    </div>");

        // $("#takeNote").val("");
        
  //       i = i + 1;
  //       console.log("II:"+i);
  //     var newId = $("#addInput div:nth-child("+i+")").find("input").attr('id');
  //     console.log("NEW:"+newId);
  //     console.log("#"+newId);
  //     $("#"+newId).focus();
  //     divId = $("#addInput div:nth-child("+i+")").attr('id');
  //     console.log("D3:"+divId);
  //     // $("#"+divId).bind(event);
  //     console.log("HHyy");

  // console.log("D3:"+divId);
  //   }
  // });
  

  
 }




    // }



  
$("#colorImg").tooltip();

$("#dot1").click(function(){
  $("#txtTitle").css("background-color","#white");
  $("#takeNote").css("background-color","#white");
  $("#colseBtn").css("background-color","#white");
  $("#formStuc").css("background-color","#white");
});
$("#dot2").click(function(){
  $("#txtTitle").css("background-color","#FFEFD5");
  $("#takeNote").css("background-color","#FFEFD5");
  $("#colseBtn").css("background-color","#FFEFD5");
  $("#formStuc").css("background-color","#FFEFD5");
});
$("#dot3").click(function(){
  $("#txtTitle").css("background-color","#BDB76B");
  $("#takeNote").css("background-color","#BDB76B");
  $("#colseBtn").css("background-color","#BDB76B");
  $("#formStuc").css("background-color","#BDB76B");
});
$("#dot4").click(function(){
  $("#txtTitle").css("background-color","#9ACD32");
  $("#takeNote").css("background-color","#9ACD32");
  $("#colseBtn").css("background-color","#9ACD32");
  $("#formStuc").css("background-color","#9ACD32");
});
$("#dot5").click(function(){
  $("#txtTitle").css("background-color","#3CB371");
  $("#takeNote").css("background-color","#3CB371");
  $("#colseBtn").css("backgrE9967Ar","#3CB371");
  $("#formStuc").css("backgrE9967Ar","#3CB371");
});
$("#dot6").click(function(){E9967A
  $("#txtTitle").css("background-color","#98FB98");
  $("#takeNote").css("background-color","#98FB98");
  $("#colseBtn").css("background-color","#98FB98");
  $("#formStuc").css("background-color","#98FB98");
});
$("#dot7").click(function(){
  $("#txtTitle").css("background-color","#90EE90");
  $("#takeNote").css("background-color","#90EE90");
  $("#colseBtn").css("background-color","#90EE90");
  $("#formStuc").css("background-color","#90EE90");
});
$("#dot8").click(function(){
  $("#txtTitle").css("background-color","#8FBC8F");
  $("#takeNote").css("background-color","#8FBC8F");
  $("#colseBtn").css("background-color","#8FBC8F");
  $("#formStuc").css("background-color","#8FBC8F");
});
$("#dot9").click(function(){
  $("#txtTitle").css("background-color","#AFEEEE");
  $("#takeNote").css("background-color","#AFEEEE");
  $("#colseBtn").css("background-color","#AFEEEE");
  $("#formStuc").css("background-color","#AFEEEE");
});
$("#dot10").click(function(){
  $("#txtTitle").css("background-color","#5F9EA0");
  $("#takeNote").css("background-color","#5F9EA0");
  $("#colseBtn").css("background-color","#5F9EA0");
  $("#formStuc").css("background-color","#5F9EA0");
});
$("#dot11").click(function(){
  $("#txtTitle").css("background-color","#D8BFD8");
  $("#takeNote").css("background-color","#D8BFD8");
  $("#colseBtn").css("background-color","#D8BFD8");
  $("#formStuc").css("background-color","#D8BFD8");
});
$("#dot12").click(function(){
  $("#txtTitle").css("background-color","#9370DB");
  $("#takeNote").css("background-color","#9370DB");
  $("#colseBtn").css("background-color","#9370DB");
  $("#formStuc").css("background-color","#9370DB");
});


$("#colseBtn").click('.grid-item',function(){
  $( "#effect" ).hide(3);
    $("#takeNote").text("Take a Note....");
    $("#takeNote").css("color","#C9C2C2");
    $("#colorImg").css("visibility","hidden");
        $("#colseBtn").css("visibility","hidden");
   var t = $("#txtTitle").val();
        var $items = getItemElement().add();
        var ti = $("#txtTitle").val();
        $items.append("<div><h1 style='font-size: 25px'>"+ti+"</h1><div>")
  // append elements to container
  $grid.append( $items )
    // add and lay out newly appended elements
    .packery( 'appended', $items );
    var $items = $grid.find('.grid-item').draggable();
// bind drag events to Packery
$grid.packery( 'bindUIDraggableEvents', $items );  
});

// var newId = $("#addInput").children("div").attr('id');
// console.log("NewID:"+newId);
// $(document).hover("#"+newId,function(){

//   $("#sideIcon").css("visibility","visible");
// });

$(document).on('click','#cancelRow',function(){
    var ID = $(this).parent().attr('id');
   console.log("HIII");
  console.log(ID);
  $("#"+ID).remove();

});

</script>
</body>
</html>